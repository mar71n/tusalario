<html>
<head>
</head>
<body>
<style>
.tipografico{
    font-size: 14px;
    text-decoration: none;
    color: #000000;
}
.notasalario{
    padding: 3px 7px;
    margin-top: 10px;
    margin-left: 30px;
	border-radius: 5px;
    background-color: #00BFFF;
    width: 420px; height: 50px
}
.notacanasta{
    padding: 3px 7px;
    margin-top: 10px;
	border-radius: 5px;
    background-color: #81DAF5;
    width: 450px; height: 90px
}
.grafico{
    //border: solid #6AC5AC 3px;
}
.notas{
    display: inline-block;
    position: absolute;
    //border: solid #6AC5AC 3px;
}
.botones{
    display: inline-block;
    //border: solid #6AC5AC 3px;
}
.btn{
	padding: 1px 5px;
	font-size: 12px;
	line-height: 1.5;
	border-radius: 3px;
	box-sizing: border-box;
	cursor: pointer;
	border: 1px solid transparent;
}
.inpt{
	margin-top: 10px;
	height: 20px;
	padding: 3px 7px;
	font-size: 12px;
	font-weight:bold;
	line-height: 1.5;
	border-radius: 3px;
	border: 1px solid transparent;
	box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
	transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
	margin: 0;
	box-sizing: border-box;
}
.titulo{
    font-size: 1.5em;
    font-weight: bold;
}
.celda{
    width: 52px;
    z-index : 1000;
}
.fila1, .fila3{
    background-color: #81DAF5;
}
.fila2{
    margin-top: 10px;
}
.fila0, .fila2{
    background-color: #00BFFF;
}
.instrucciones{
    padding: 15px;
    box-shadow: 1px 1px #aeaeae;
    border-radius: 20px;
    color: #222;
    background-color: #d2d2d2;
    font-size: 100%;
    width:700px;
}
</style>
<script type="text/javascript" src="https://www.google.com/jsapi"></script> 
<script type="text/javascript">
   google.load("visualization", "1", {packages:["corechart"]});
   var grafico = {};
   grafico = (function(){
   //privada
   //publica
   return {
        dibujarGrafico: function(setDatos) {
            // Tabla de datos: valores y etiquetas de la gráfica
            var data = google.visualization.arrayToDataTable(setDatos);
            var options = {
            //title: '% salario de canasta',
            legend: { position: 'in' },
            vAxis:{baseline: '100'},
            };
            // Dibujar el gráfico
            new google.visualization.LineChart(
            //ColumnChart sería el tipo de gráfico a dibujar
            document.getElementById('GraficoGoogleChart-ejemplo-1')
            ).draw(data, options);
        },
        dibujarGrafico2: function(setDatos) {
            // Tabla de datos: valores y etiquetas de la gráfica
            var data = google.visualization.arrayToDataTable(setDatos);
            var options = {
                //title: '% salario de canasta',
                orientation: 'horizontal',
                //vAxis:{minValue: '0'},
                legend: { position: 'in' },
                //vAxis:{baseline: '100'},
                //explorer: {axis: 'vertical',actions: ['dragToPan', 'rightClickToReset'] }
            };
            // Dibujar el gráfico
            new google.visualization.BarChart(
            //ColumnChart sería el tipo de gráfico a dibujar
            document.getElementById('GraficoGoogleChart-ejemplo-1')
            ).draw(data, options);
        }
   };
   })();
   var tabla = {};
   tabla = (function(){
   //privada
        var columnas = 12;
        var filas = 4;
        var meses=["ENE","FEB","MAR","ABR","MAY","JUN","JUL","AGO","SET","OCT","NOV","DIC","ENE","FEB","MAR","ABR","MAY","JUN","JUL","AGO","SET","OCT","NOV","DIC"];
        function ponerFila(lindatos,fila){
            fila2 = document.getElementsByClassName(fila);
            for(j=0; j<12; j++){
                fila2[j].value=lindatos[j];
            }
        }
   //publica
   return {
        habilitar: function(sino){
            fila0 = document.getElementsByClassName("fila0");
            fila2 = document.getElementsByClassName("fila2");
            for(j=0; j<12; j++){
                fila0[j].disabled = !sino;
                fila2[j].disabled = !sino;
            }
        },
        ponerCanasta: function(canasta){
            ponerFila(canasta, "fila1");
            canasta = canasta.slice(12);
            ponerFila(canasta, "fila3");
        },
        ponerSalarios: function(salarios){
            this.habilitar(false);
            ponerFila(salarios, "fila0");
            salarios = salarios.slice(12);
            ponerFila(salarios, "fila2");
        },
        ponerTabla: function (){
            var laTabla = '';
            var primerfila = '<tr>';
            for (var c = 0; c < columnas; c++){
                primerfila = primerfila + '<th> ' + meses[c] + ' </th>';
            }
            laTabla = '';
            for (var f = 0; f < filas; f++){
                laTabla = laTabla + '<tr>';
                for (var c = 1; c <= columnas; c++){
                    laTabla = laTabla +  '<td> <input type="text" class="inpt celda columna' + c + ' fila' + f + '" disabled/>  </td>';
                }
            }
            primerfila = primerfila + "</th></tr>";
            laTabla = '<table >' + primerfila + laTabla + '</table>';
            laTabla = '<table> <tr><td><div><b> 2013</b></div><div>Salario:</div><div>Canasta:</div><div><b> 2014</b></div><div>Salario:</div><div>Canasta:</div></td><td>' + laTabla + '</td></tr></table>';
            document.write(laTabla);
        },
        generarData: function(){
            var dataA = [];
                var filaF=[['Texto', '% de la canasta']];
                for(j=0; j<4; j=j+2){
                   for(k=1; k<=columnas; k++){
                       valor = parseFloat((parseInt(document.getElementsByClassName("columna"+k)[j].value) /parseInt(document.getElementsByClassName("columna"+k)[j+1].value)* 100).toFixed(2));
                       filaF.push([meses[k-1], valor]);
                   }
                }
                dataA.push(filaF);
            return dataA;
        }
   };
   })();
   var datos = {};
   datos = (function(){
   //privada
   //publica
   return {
        canasta3: [3207, 3236, 3290, 3328, 3373, 3430, 3526, 3610, 3680, 3751, 3824, 3899, 4036, 4187, 4304, 4432, 4550,4664,null,null,null,null,null,null],
        canasta5bis: [7317, 7377, 7521, 7644, 7752, 7902, 8144, 8351, 8534, 8745, 8905, 9087, 9378, 9802, 10117, 10454, 10711,10943,null,null,null,null,null,null],
        contratado: [4400,4400,4400,4400,4400,5200, 5200, 5200, 5200, 5200, 5200, 5200, 5600, 5600, 5600, 5600, 5600,6200,null,null,null,null,null,null],
        administrativo: [6721, 6721, 6721, 6721, 7221,7221, 7221, 7821, 7821, 7821, 7821, 7821, 8821, 8621, 8621, 9233, 9233,9233, 9233, 9674, 9674, 9674, 10292, 11288],
   };
   })();
 </script> 
<script>
function marcar(boton){
    document.getElementById("b2").style.backgroundColor = "";
    document.getElementById("b3").style.backgroundColor = "";
    document.getElementById("b4").style.backgroundColor = "";
    document.getElementById(boton).style.backgroundColor = "#00BFFF";
    switch(boton){
        case "b2": document.getElementsByClassName("notasalario")[0].innerText = "Salario testigo de contratado";break;
        case "b3": document.getElementsByClassName("notasalario")[0].innerHTML = "<b>Administrativo Nivel 01-TRAMO A</b>, con fondo estimulo de 60% de evaluación";break;
        case "b4": document.getElementsByClassName("notasalario")[0].innerText = "Completa con tus datos y grafica.";break;
    }
}
function marcarC(boton){
    document.getElementById("c1").style.backgroundColor = "";
    document.getElementById("c2").style.backgroundColor = "";
    document.getElementById(boton).style.backgroundColor = "#81DAF5";
    switch(boton){
        case "c1": document.getElementsByClassName("notacanasta")[0].innerHTML = "<b>Hogar 3 + alquiler del Hogar 5:</b> hogar unipersonal de un varón de 25 años, activo + alquiler del Hogar 5 (matrimonio de dos adultos mayores de 25 años, activos, sin hijos).";break;
        case "c2": document.getElementsByClassName("notacanasta")[0].innerHTML = "<b>Hogar 5 bis:</b> Matrimonio compuesto por una mujer y un varón, ambos de 35 años, activos, con dos hijos varones de 6 y 9 años e inquilinos de la vivienda.";break;
    }
}
function marcarTipo(tipo){
    document.getElementById("lineas").style.backgroundColor = "";
    document.getElementById("barras").style.backgroundColor = "";
    document.getElementById(tipo).style.backgroundColor = "#81DAF5";
}
function graficarIndicado(){
	if (document.getElementById("lineas").style.backgroundColor !== ""){
		grafico.dibujarGrafico(tabla.generarData()[0]);
	} else{
		grafico.dibujarGrafico2(tabla.generarData()[0]);
	}
}
window.onload=function(){grafico.dibujarGrafico(tabla.generarData()[0]);};
</script>
<p class="titulo">Gráfico de Salario sobre Canasta</p>
<div class="instrucciones">
<p>Selecciona un set de datos para salarios, otro para canasta y presiona "Graficar".
<p>Tambíen podes probar con tus propios datos en la fila de salario.
<p>Para calcular el poder adquisitivo de nuestro salario (según Planta o Contratado), seguí los siguientes pasos: 
<p>1- cargá  el valor de tu salario en la celda/s del mes/es, 
<p>2- elegí la canasta mas representativa segun la composición de tu hogar (puede ser la del Hogar 3 o Hogar 5 bis), 
<p>3- presioná Graficar y listo!
</div>
<form>
<script>
tabla.ponerTabla();
tabla.ponerSalarios(datos.contratado);
tabla.ponerCanasta(datos.canasta3);
</script>
<div class="botones">
    <p>
        <input id='b2' type='button' class="btn" value='Contratado' onclick='tabla.ponerSalarios(datos.contratado); marcar("b2");'>
        <input id='b3' type='button' class="btn" value='Planta Adm.' onclick='tabla.ponerSalarios(datos.administrativo); marcar("b3");'>
        <input id='b4' type='button' class="btn" value='Personalizado' onclick='tabla.habilitar(true); marcar("b4");'>
    <p>
        <input id='c1' type='button' class="btn" value='Canasta 3' title='Hogar 3: hogar unipersonal de un varón de 25 años, activo y propietario de la vivienda.' onclick='tabla.ponerCanasta(datos.canasta3); marcarC("c1");'>
        <input id='c2' type='button' class="btn" value='Canasta 5Bis' title='Hogar 5 bis: matrimonio compuesto por una mujer y un varón, ambos de 35 años, 
    activos, con dos hijos varones de 6 y 9 años e inquilinos de la vivienda.' onclick='tabla.ponerCanasta(datos.canasta5bis); marcarC("c2");'>
    <p><input type='button' class="btn" value='Graficar' onclick='graficarIndicado();'>
</div>
<div class="notas">
  <div class="notasalario">salario</div>
  <div class="notacanasta">canasta</div>
</div>
</form>
<div>
<a class="tipografico" id="lineas" title="Grafico de lineas" href="#" onclick="grafico.dibujarGrafico(tabla.generarData()[0]);marcarTipo('lineas');return false;">Lineas</a>
-
<a class="tipografico" id="barras" title="Grafico de barras" href="#" onclick="grafico.dibujarGrafico2(tabla.generarData()[0]);marcarTipo('barras');return false;">Barras</a>
<div class="grafico" id="GraficoGoogleChart-ejemplo-1" style="width: 800px; height: 600px">
</div>
</div>
<script>
marcar("b2");
marcarC("c1");
marcarTipo('lineas');
</script>
</body>
</html>